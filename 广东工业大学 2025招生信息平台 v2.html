<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>广东工业大学招生网</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #e9ecef;
            --accent-color: #ffc107;
            --success-color: #198754;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            padding-top: 70px;
        }
        
        .navbar {
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand {
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .navbar-brand img {
            margin-right: 10px;
        }
        
        .nav-link {
            font-weight: 500;
            color: #555;
            transition: all 0.3s;
            padding: 0.5rem 1rem;
            border-radius: 4px;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--primary-color);
            background-color: rgba(0, 86, 179, 0.1);
        }
        
        /* 英雄区域样式 */
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                        url('https://images.unsplash.com/photo-1562774053-701939374585?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover no-repeat;
            color: white;
            padding: 100px 0;
            text-align: center;
            margin-bottom: 50px;
            border-radius: 10px;
        }
        
        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            max-width: 700px;
            margin: 0 auto 30px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.5);
        }
        
        .btn-hero {
            background-color: var(--accent-color);
            color: var(--dark-color);
            font-weight: 600;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            transition: all 0.3s;
            border: none;
        }
        
        .btn-hero:hover {
            background-color: #e0a800;
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .section-title {
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 30px;
            position: relative;
            padding-bottom: 15px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 4px;
            background-color: var(--accent-color);
            border-radius: 2px;
        }
        
        .center-title {
            text-align: center;
        }
        
        .center-title::after {
            left: 50%;
            transform: translateX(-50%);
        }
        
        /* VR 校园部分样式 */
        .vr-section {
            margin-bottom: 60px;
        }
        
        .vr-intro {
            max-width: 800px;
            margin: 0 auto 40px;
            text-align: center;
            font-size: 1.1rem;
            line-height: 1.7;
            color: #555;
        }
        
        .vr-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .vr-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .vr-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
        }
        
        .vr-card-header {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 20px;
            font-weight: 600;
            font-size: 1.2rem;
        }
        
        .vr-card-image {
            position: relative;
            height: 200px;
            overflow: hidden;
        }
        
        .vr-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .vr-card:hover .vr-card-image img {
            transform: scale(1.05);
        }
        
        .vr-card-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            color: white;
            padding: 20px;
        }
        
        .vr-card-overlay h4 {
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .vr-card-overlay p {
            margin: 0;
            opacity: 0.9;
        }
        
        .vr-card-body {
            padding: 20px;
        }
        
        .vr-description {
            color: #555;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .vr-btn {
            display: block;
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 12px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s;
        }
        
        .vr-btn:hover {
            background-color: #004494;
            color: white;
        }
        
        .vr-btn i {
            margin-right: 8px;
        }
        
        /* 专业查询表格 */
        .category-filter {
            margin-bottom: 20px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .table-responsive {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }
        
        .table-striped>tbody>tr:nth-of-type(odd)>* {
            background-color: rgba(0, 86, 179, 0.03);
        }
        
        .vr-container {
            height: 500px;
            margin-bottom: 40px;
        }
        
        .campus-tag {
            font-size: 0.8em;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
        }
        
        .main-campus {
            background-color: #d1e7dd;
            color: #0f5132;
        }
        
        .jieyang-campus {
            background-color: #fff3cd;
            color: #664d03;
        }
        
        /* 志愿填报工具 */
        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }
        
        .card-header {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
            border-radius: 10px 10px 0 0 !important;
        }
        
        .analysis-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 4px solid var(--primary-color);
        }
        
        /* 优化后的AI咨询助手 */
        .chatbot-container {
            position: fixed;
            right: 20px;
            bottom: 20px;
            z-index: 1000;
            transition: all 0.3s ease;
            max-height: 90vh;
        }

        .chatbot-closed {
            cursor: pointer;
            background-color: var(--primary-color);
            color: white;
            border-radius: 25px;
            padding: 12px 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            transition: all 0.3s;
        }

        .chatbot-closed:hover {
            background-color: #004494;
            transform: translateY(-2px);
        }

        .chatbot-closed i {
            margin-right: 8px;
        }

        .chatbot-open {
            display: flex;
            flex-direction: column;
            width: 320px;
            max-height: 90vh;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 25px rgba(0,0,0,0.2);
            background-color: white;
            transform: scale(1);
            opacity: 1;
            transition: all 0.3s ease;
        }

        .chatbot-closed .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
        }

        .chatbot-card {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .chatbot-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            background-color: var(--primary-color);
            color: white;
        }
        
        .chatbot-header .header-content {
            display: flex;
            align-items: center;
        }

        .chatbot-header i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .chatbot-header .btn-close-chat {
            background: none;
            border: none;
            color: rgba(255,255,255,0.7);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chatbot-header .btn-close-chat:hover {
            color: white;
        }
        
        #chatWindow {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            background-color: #f8f9fa;
            max-height: 300px;
            min-height: 150px;
        }
        
        .chat-message {
            max-width: 85%;
            margin-bottom: 15px;
            padding: 10px 15px;
            border-radius: 18px;
            position: relative;
            clear: both;
            animation: fadeIn 0.3s ease;
        }
        
        .user-message {
            background-color: var(--primary-color);
            color: white;
            float: right;
            border-bottom-right-radius: 5px;
        }
        
        .ai-message {
            background-color: white;
            color: #333;
            float: left;
            border-bottom-left-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .form-container {
            padding: 15px;
            background-color: white;
            border-top: 1px solid #e9ecef;
        }

        .typing-indicator {
            display: none;
            background-color: white;
            padding: 8px 15px;
            border-radius: 15px;
            margin-bottom: 10px;
            float: left;
            clear: both;
        }
        
        .typing-indicator span {
            height: 8px;
            width: 8px;
            float: left;
            margin: 0 1px;
            background-color: #9E9EA1;
            display: block;
            border-radius: 50%;
            opacity: 0.4;
        }
        
        .typing-indicator span:first-of-type {
            animation: typing-dots 1s infinite;
        }
        
        .typing-indicator span:nth-of-type(2) {
            animation: typing-dots 1s infinite 0.1s;
        }
        
        .typing-indicator span:last-of-type {
            animation: typing-dots 1s infinite 0.2s;
        }
        
        @keyframes typing-dots {
            0%, 20% { transform: translateY(0); opacity: 0.4; }
            50% { transform: translateY(-5px); opacity: 0.8; }
        }
        
        /* 页脚 */
        footer {
            background: linear-gradient(to right, var(--primary-color), #003d82);
            color: white;
            padding: 30px 0 20px;
            margin-top: 50px;
        }
        
        footer p {
            margin-bottom: 10px;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
            }
            
            .vr-links {
                grid-template-columns: 1fr;
            }
            
            .chatbot-open {
                width: 300px;
                right: 10px;
                bottom: 10px;
            }

            .chatbot-closed {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .chatbot-open {
                width: calc(100% - 20px);
                right: 10px;
                left: 10px;
            }
        }
    </style>
</head>
<body>

<!-- 顶部导航栏 -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#">
            <i class="fas fa-graduation-cap"></i> 广东工业大学招生网
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <div class="navbar-nav ms-auto">
                <a class="nav-link active" href="#home"><i class="fas fa-home me-1"></i>首页</a>
                <a class="nav-link" href="#major"><i class="fas fa-book me-1"></i>专业</a>
                <a class="nav-link" href="#vr"><i class="fas fa-vr-cardboard me-1"></i>VR校园</a>
                <a class="nav-link" href="#consult"><i class="fas fa-comments me-1"></i>咨询</a>
            </div>
        </div>
    </div>
</nav>

<!-- 英雄区域 -->
<section class="hero-section" id="home">
    <div class="container">
        <h1 class="hero-title">广东工业大学 2025招生信息平台</h1>
        <p class="hero-subtitle">探索创新人才培养高地，开启卓越工程师成长之路</p>
        <div class="mt-4">
            <a href="#major" class="btn btn-hero">查看招生专业</a>
            <a href="#vr" class="btn btn-outline-light mx-2" style="padding: 12px 30px; border-radius: 50px;">VR校园体验</a>
        </div>
    </div>
</section>

<!-- 主体内容 -->
<main class="container">
    <!-- 专业查询表格 -->
    <section id="major" class="mb-5">
        <h2 class="mb-4 section-title">专业查询系统（2024年数据）</h2>
        
        <!-- 筛选条件 -->
        <div class="category-filter row g-3">
            <div class="col-md-3">
                <select id="categorySelect" class="form-select">
                    <option value="all">全部科类</option>
                    <option value="物理类">物理类</option>
                    <option value="历史类">历史类</option>
                </select>
            </div>
            <div class="col-md-3">
                <select id="campusSelect" class="form-select">
                    <option value="all">全部校区</option>
                    <option value="主校区">主校区</option>
                    <option value="揭阳校区">揭阳校区</option>
                </select>
            </div>
            <div class="col-md-6">
                <div class="input-group">
                    <input type="text" class="form-control" id="searchInput" placeholder="搜索专业组/学院/专业名称...">
                    <button class="btn btn-primary" type="button">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="table-responsive">
            <table class="table table-striped table-hover" id="majorTable">
                <thead>
                    <tr>
                        <th>专业组</th>
                        <th>学院</th>
                        <th>专业名称</th>
                        <th>科类</th>
                        <th>校区</th>
                        <th>录取数</th>
                        <th>最高分</th>
                        <th>平均分</th>
                        <th>最低分</th>
                        <th>最低排位</th>
                    </tr>
                </thead>
                <tbody id="majorTableBody">
                    <!-- 专业数据将通过JavaScript动态填充 -->
                </tbody>
            </table>
        </div>
    </section>

    <!-- VR校园模块 -->
    <section id="vr" class="mb-5">
        <div class="vr-section">
            <h2 class="text-center mb-4 section-title center-title">VR校园体验</h2>
            
            <div class="vr-intro">
                <p>通过我们的VR全景技术，您可以身临其境地探索广东工业大学的各个校区。无论您身在何处，只需点击下方校区卡片，即可开始沉浸式校园之旅，感受广工大的学术氛围和校园环境。</p>
            </div>
            
            <div class="vr-links">
                <div class="vr-card">
                    <div class="vr-card-header">大学城校区</div>
                    <div class="vr-card-image">
                        <img src="https://images.unsplash.com/photo-1562774053-701939374585?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80" alt="大学城校区">
                        <div class="vr-card-overlay">
                            <h4>主校区</h4>
                            <p>占地2118亩，现代化教学设施</p>
                        </div>
                    </div>
                    <div class="vr-card-body">
                        <p class="vr-description">广东工业大学主校区，位于广州大学城，是学校最大的校区。拥有现代化的教学楼、实验中心、图书馆和体育设施，环境优美，学术氛围浓厚，是学校教学科研的核心区域。</p>
                        <a href="https://www.720yun.com/t/296jz0yavk5?scene_id=8718903" target="_blank" class="vr-btn">
                            <i class="fas fa-vr-cardboard"></i> 探索大学城校区VR全景
                        </a>
                    </div>
                </div>
                
                <div class="vr-card">
                    <div class="vr-card-header">龙洞校区</div>
                    <div class="vr-card-image">
                        <img src="https://images.unsplash.com/photo-1541339907198-e08756dedf3f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80" alt="龙洞校区">
                        <div class="vr-card-overlay">
                            <h4>管理学院</h4>
                            <p>绿树成荫，环境优美</p>
                        </div>
                    </div>
                    <div class="vr-card-body">
                        <p class="vr-description">龙洞校区位于广州市天河区，以管理学、经济学、艺术设计等学科为主。校园环境优美，绿树成荫，拥有独特的园林式建筑风格，是学习与生活的理想之地。</p>
                        <a href="https://www.720yun.com/t/579jvskkuO8?scene_id=19751397" target="_blank" class="vr-btn">
                            <i class="fas fa-vr-cardboard"></i> 探索龙洞校区VR全景
                        </a>
                    </div>
                </div>
                
                <div class="vr-card">
                    <div class="vr-card-header">东风路校区</div>
                    <div class="vr-card-image">
                        <img src="https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80" alt="东风路校区">
                        <div class="vr-card-overlay">
                            <h4>艺术设计</h4>
                            <p>城市中心，文化氛围浓厚</p>
                        </div>
                    </div>
                    <div class="vr-card-body">
                        <p class="vr-description">东风路校区位于广州市中心，以建筑与艺术设计学院为主。校区交通便利，文化氛围浓厚，拥有专业的设计工作室和展览空间，是艺术创意人才的培养基地。</p>
                        <a href="https://www.720yun.com/t/ef5jepkwkO2?scene_id=16097895" target="_blank" class="vr-btn">
                            <i class="fas fa-vr-cardboard"></i> 探索东风路校区VR全景
                        </a>
                    </div>
                </div>
                
                <div class="vr-card">
                    <div class="vr-card-header">揭阳校区</div>
                    <div class="vr-card-image">
                        <img src="https://images.unsplash.com/photo-1523580494863-6f3031224c94?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80" alt="揭阳校区">
                        <div class="vr-card-overlay">
                            <h4>新建校区</h4>
                            <p>先进设施，产教融合</p>
                        </div>
                    </div>
                    <div class="vr-card-body">
                        <p class="vr-description">揭阳校区是广东工业大学新建校区，位于揭阳市，致力于培养先进制造业和现代服务业的高素质应用型人才。校区设施先进，环境优美，是产教融合的示范基地。</p>
                        <a href="https://www.720yun.com/t/abvkzyq971w?scene_id=80035664" target="_blank" class="vr-btn">
                            <i class="fas fa-vr-cardboard"></i> 探索揭阳校区VR全景
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 志愿填报工具 -->
    <section id="consult" class="mb-5">
        <h2 class="mb-4 section-title">志愿填报助手（2024年参考）</h2>
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">参考数据</h5>
                <div class="row">
                    <div class="col-md-6">
                        <div class="card analysis-card mb-3">
                            <div class="card-body">
                                <h5 class="card-title text-primary"><i class="fas fa-atom me-2"></i>物理类</h5>
                                <p class="card-text">
                                    2024年最低录取分：548分<br>
                                    最低排位：全省约4.5万名
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card analysis-card mb-3">
                            <div class="card-body">
                                <h5 class="card-title text-primary"><i class="fas fa-book me-2"></i>历史类</h5>
                                <p class="card-text">
                                    2024年最低录取分：522分<br>
                                    最低排位：全省约2.65万名
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-3 mt-4">
                    <label for="scoreInput" class="form-label fw-bold">输入你的分数进行智能分析</label>
                    <div class="input-group">
                        <select id="科类Select" class="form-select" style="width: 120px;">
                            <option value="物理类">物理类</option>
                            <option value="历史类">历史类</option>
                        </select>
                        <input type="number" class="form-control" id="scoreInput" placeholder="例如：560">
                        <button class="btn btn-primary" id="analyzeBtn">
                            <i class="fas fa-chart-line me-1"></i>分析
                        </button>
                    </div>
                </div>
                <div id="analysisResult" class="mt-4"></div>
            </div>
        </div>
    </section>
</main>

<!-- 页脚 -->
<footer class="bg-light py-4">
    <div class="container text-center">
        <div class="row">
            <div class="col-md-4 mb-4 mb-md-0">
                <h5>招生办公室</h5>
                <p>地址：广州市番禺区广州大学城外环西路100号</p>
            </div>
            <div class="col-md-4 mb-4 mb-md-0">
                <h5>联系方式</h5>
                <p><i class="fas fa-phone me-2"></i>招生热线：020-39322681</p>
                <p><i class="fas fa-envelope me-2"></i>邮箱：zsb@gdut.edu.cn</p>
            </div>
            <div class="col-md-4">
                <h5>关注我们</h5>
                <div class="d-flex justify-content-center gap-3 mt-3">
                    <a href="#" class="text-white fs-4"><i class="fab fa-weixin"></i></a>
                    <a href="#" class="text-white fs-4"><i class="fab fa-weibo"></i></a>
                    <a href="#" class="text-white fs-4"><i class="fab fa-qq"></i></a>
                </div>
            </div>
        </div>
        <hr class="my-4 bg-white">
        <p>Copyright © 2025 广东工业大学招生办公室 版权所有</p>
    </div>
</footer>

<!-- 优化后的AI咨询助手 -->
<div class="chatbot-container" id="chatbotContainer">
    <div class="chatbot-open" id="chatbotCard">
        <div class="chatbot-card card">
            <div class="chatbot-header">
                <div class="header-content">
                    <i class="fas fa-robot me-2"></i>
                    <span>AI招生咨询助手</span>
                </div>
                <button class="btn-close-chat" id="btnCloseChat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="chatWindow">
                <div class="typing-indicator" id="typingIndicator">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
            <div class="form-container">
                <form id="chatForm">
                    <div class="input-group">
                        <input type="text" class="form-control" id="userInput" placeholder="请输入问题...">
                        <button class="btn btn-primary" type="submit">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="chatbot-container" id="chatbotClosed" style="display: none;">
    <div class="chatbot-closed">
        <i class="fas fa-robot me-2"></i> 招生咨询助手
        <span class="badge" id="unreadBadge">1</span>
    </div>
</div>

<!-- 脚本文件 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
      // 2024年专业数据（物理类和历史类）
    const majorData = [
        // ====== 物理类数据（主校区） ======
        {专业组: "206", 学院: "自动化学院", 专业名称: "电气工程及其自动化", 录取数: 256, 最高分: 622, 平均分: 598, 最低分: 594, 最低排位: 25873, 科类: "物理类", 校区: "主校区"},
        {专业组: "206", 学院: "自动化学院", 专业名称: "自动化（创新班）", 录取数: 20, 最高分: 616, 平均分: 610, 最低分: 608, 最低排位: 16993, 科类: "物理类", 校区: "主校区"},
        {专业组: "206", 学院: "自动化学院", 专业名称: "自动化类", 录取数: 288, 最高分: 608, 平均分: 599, 最低分: 595, 最低排位: 25154, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "207", 学院: "数据科学与大数据技术学院", 专业名称: "数据科学与大数据技术", 录取数: 90, 最高分: 593, 平均分: 586, 最低分: 584, 最低排位: 33939, 科类: "物理类", 校区: "主校区"},
        {专业组: "207", 学院: "数据科学与大数据技术学院", 专业名称: "物联网工程", 录取数: 90, 最高分: 592, 平均分: 585, 最低分: 584, 最低排位: 34297, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "208", 学院: "材料类学院", 专业名称: "材料类", 录取数: 197, 最高分: 577, 平均分: 571, 最低分: 567, 最低排位: 50424, 科类: "物理类", 校区: "主校区"},
        {专业组: "208", 学院: "材料类学院", 专业名称: "材料类（创新班）", 录取数: 35, 最高分: 590, 平均分: 580, 最低分: 577, 最低排位: 40300, 科类: "物理类", 校区: "主校区"},
        {专业组: "208", 学院: "材料类学院", 专业名称: "材料成型及控制工程", 录取数: 80, 最高分: 580, 平均分: 572, 最低分: 569, 最低排位: 48511, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "210", 学院: "能源与电力学院", 专业名称: "能源动力类", 录取数: 217, 最高分: 593, 平均分: 578, 最低分: 575, 最低排位: 42144, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "211", 学院: "机电工程学院", 专业名称: "测控技术与仪器", 录取数: 23, 最高分: 584, 平均分: 580, 最低分: 579, 最低排位: 38361, 科类: "物理类", 校区: "主校区"},
        {专业组: "211", 学院: "机电工程学院", 专业名称: "工业工程", 录取数: 57, 最高分: 582, 平均分: 579, 最低分: 579, 最低排位: 38363, 科类: "物理类", 校区: "主校区"},
        {专业组: "211", 学院: "机电工程学院", 专业名称: "机械电子工程", 录取数: 182, 最高分: 592, 平均分: 586, 最低分: 582, 最低排位: 35501, 科类: "物理类", 校区: "主校区"},
        {专业组: "211", 学院: "机电工程学院", 专业名称: "机械电子工程（创新班）", 录取数: 30, 最高分: 600, 平均分: 594, 最低分: 592, 最低排位: 27812, 科类: "物理类", 校区: "主校区"},
        {专业组: "211", 学院: "机电工程学院", 专业名称: "机械设计制造及其自动化", 录取数: 183, 最高分: 597, 平均分: 583, 最低分: 580, 最低排位: 37489, 科类: "物理类", 校区: "主校区"},
        {专业组: "211", 学院: "机电工程学院", 专业名称: "新能源汽车工程", 录取数: 68, 最高分: 595, 平均分: 582, 最低分: 579, 最低排位: 37975, 科类: "物理类", 校区: "主校区"},
        {专业组: "211", 学院: "机电工程学院", 专业名称: "智能感知工程", 录取数: 35, 最高分: 589, 平均分: 581, 最低分: 579, 最低排位: 37996, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "212", 学院: "轻工化工学院", 专业名称: "智能制造工程", 录取数: 54, 最高分: 591, 平均分: 583, 最低分: 581, 最低排位: 36660, 科类: "物理类", 校区: "主校区"},
        {专业组: "212", 学院: "轻工化工学院", 专业名称: "化学", 录取数: 35, 最高分: 583, 平均分: 566, 最低分: 563, 最低排位: 54902, 科类: "物理类", 校区: "主校区"},
        {专业组: "212", 学院: "轻工化工学院", 专业名称: "化学工程与工艺", 录取数: 71, 最高分: 579, 平均分: 567, 最低分: 565, 最低排位: 52565, 科类: "物理类", 校区: "主校区"},
        {专业组: "212", 学院: "轻工化工学院", 专业名称: "化学工程与工艺（创新班）", 录取数: 40, 最高分: 587, 平均分: 574, 最低分: 570, 最低排位: 46860, 科类: "物理类", 校区: "主校区"},
        {专业组: "212", 学院: "轻工化工学院", 专业名称: "能源化学工程", 录取数: 39, 最高分: 583, 平均分: 569, 最低分: 566, 最低排位: 50958, 科类: "物理类", 校区: "主校区"},
        {专业组: "212", 学院: "轻工化工学院", 专业名称: "食品科学与工程", 录取数: 55, 最高分: 586, 平均分: 566, 最低分: 564, 最低排位: 53927, 科类: "物理类", 校区: "主校区"},
        {专业组: "212", 学院: "轻工化工学院", 专业名称: "应用化学", 录取数: 89, 最高分: 578, 平均分: 565, 最低分: 563, 最低排位: 54900, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "213", 学院: "信息工程学院", 专业名称: "电子信息工程（创新班）", 录取数: 30, 最高分: 610, 平均分: 603, 最低分: 602, 最低排位: 20898, 科类: "物理类", 校区: "主校区"},
        {专业组: "213", 学院: "信息工程学院", 专业名称: "电子信息类", 录取数: 569, 最高分: 601, 平均分: 591, 最低分: 586, 最低排位: 31867, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "214", 学院: "土木与交通工程学院", 专业名称: "工程管理", 录取数: 21, 最高分: 578, 平均分: 566, 最低分: 560, 最低排位: 58306, 科类: "物理类", 校区: "主校区"},
        {专业组: "214", 学院: "土木与交通工程学院", 专业名称: "测绘工程", 录取数: 35, 最高分: 572, 平均分: 559, 最低分: 556, 最低排位: 63321, 科类: "物理类", 校区: "主校区"},
        {专业组: "214", 学院: "土木与交通工程学院", 专业名称: "给排水科学与工程", 录取数: 10, 最高分: 565, 平均分: 561, 最低分: 558, 最低排位: 60600, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "215", 学院: "土木与交通工程学院", 专业名称: "建筑环境与能源应用工程", 录取数: 20, 最高分: 566, 平均分: 560, 最低分: 557, 最低排位: 61344, 科类: "物理类", 校区: "主校区"},
        {专业组: "215", 学院: "土木与交通工程学院", 专业名称: "交通运输", 录取数: 21, 最高分: 569, 平均分: 562, 最低分: 559, 最低排位: 58849, 科类: "物理类", 校区: "主校区"},
        {专业组: "215", 学院: "土木与交通工程学院", 专业名称: "土木工程", 录取数: 54, 最高分: 568, 平均分: 557, 最低分: 555, 最低排位: 63878, 科类: "物理类", 校区: "主校区"},
        {专业组: "215", 学院: "土木与交通工程学院", 专业名称: "土木工程（创新班）", 录取数: 40, 最高分: 587, 平均分: 564, 最低分: 558, 最低排位: 60400, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "216", 学院: "计算机学院", 专业名称: "计算机类", 录取数: 538, 最高分: 607, 平均分: 592, 最低分: 588, 最低排位: 30594, 科类: "物理类", 校区: "主校区"},
        {专业组: "216", 学院: "计算机学院", 专业名称: "人工智能（创新班）", 录取数: 40, 最高分: 613, 平均分: 603, 最低分: 599, 最低排位: 22684, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "218", 学院: "环境科学与工程学院", 专业名称: "安全工程", 录取数: 42, 最高分: 572, 平均分: 559, 最低分: 556, 最低排位: 62595, 科类: "物理类", 校区: "主校区"},
        {专业组: "218", 学院: "环境科学与工程学院", 专业名称: "环境工程", 录取数: 93, 最高分: 574, 平均分: 559, 最低分: 557, 最低排位: 62264, 科类: "物理类", 校区: "主校区"},
        {专业组: "218", 学院: "环境科学与工程学院", 专业名称: "环境科学", 录取数: 18, 最高分: 577, 平均分: 561, 最低分: 560, 最低排位: 58362, 科类: "物理类", 校区: "主校区"},
        {专业组: "218", 学院: "环境科学与工程学院", 专业名称: "环境科学（创新班）", 录取数: 25, 最高分: 576, 平均分: 563, 最低分: 561, 最低排位: 57090, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "220", 学院: "物理与光电工程学院", 专业名称: "电子科学与技术", 录取数: 162, 最高分: 588, 平均分: 586, 最低分: 584, 最低排位: 33883, 科类: "物理类", 校区: "主校区"},
        {专业组: "220", 学院: "物理与光电工程学院", 专业名称: "电子科学与技术（创新班）", 录取数: 30, 最高分: 603, 平均分: 592, 最低分: 588, 最低排位: 30245, 科类: "物理类", 校区: "主校区"},
        {专业组: "220", 学院: "物理与光电工程学院", 专业名称: "光电信息科学与工程", 录取数: 166, 最高分: 596, 平均分: 583, 最低分: 582, 最低排位: 35925, 科类: "物理类", 校区: "主校区"},
        {专业组: "220", 学院: "物理与光电工程学院", 专业名称: "应用物理学", 录取数: 29, 最高分: 589, 平均分: 584, 最低分: 582, 最低排位: 35789, 科类: "物理类", 校区: "主校区"},
        {专业组: "220", 学院: "物理与光电工程学院", 专业名称: "生物工程", 录取数: 49, 最高分: 574, 平均分: 568, 最低分: 566, 最低排位: 51550, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "221", 学院: "生物医药学院", 专业名称: "生物医学工程", 录取数: 54, 最高分: 587, 平均分: 574, 最低分: 570, 最低排位: 47605, 科类: "物理类", 校区: "主校区"},
        {专业组: "221", 学院: "生物医药学院", 专业名称: "制药工程", 录取数: 71, 最高分: 585, 平均分: 568, 最低分: 566, 最低排位: 51825, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "222", 学院: "生态环境与资源学院", 专业名称: "环境生态工程", 录取数: 20, 最高分: 564, 平均分: 562, 最低分: 562, 最低排位: 56335, 科类: "物理类", 校区: "主校区"},
        {专业组: "222", 学院: "生态环境与资源学院", 专业名称: "环境生态工程（创新班）", 录取数: 30, 最高分: 574, 平均分: 565, 最低分: 562, 最低排位: 55371, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "223", 学院: "集成电路学院", 专业名称: "集成电路设计与集成系统", 录取数: 85, 最高分: 603, 平均分: 597, 最低分: 594, 最低排位: 25896, 科类: "物理类", 校区: "主校区"},
        {专业组: "223", 学院: "集成电路学院", 专业名称: "集成电路设计与集成系统（创新班）", 录取数: 30, 最高分: 611, 平均分: 607, 最低分: 603, 最低排位: 20103, 科类: "物理类", 校区: "主校区"},
        {专业组: "223", 学院: "集成电路学院", 专业名称: "微电子科学与工程", 录取数: 105, 最高分: 600, 平均分: 593, 最低分: 592, 最低排位: 27184, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "225", 学院: "数学与统计学院", 专业名称: "数学类", 录取数: 202, 最高分: 588, 平均分: 572, 最低分: 568, 最低排位: 48947, 科类: "物理类", 校区: "主校区"},
        {专业组: "225", 学院: "数学与统计学院", 专业名称: "数学与应用数学（创新班）", 录取数: 30, 最高分: 608, 平均分: 584, 最低分: 579, 最低排位: 37923, 科类: "物理类", 校区: "主校区"},
        {专业组: "225", 学院: "数学与统计学院", 专业名称: "应用统计学", 录取数: 45, 最高分: 579, 平均分: 571, 最低分: 568, 最低排位: 49090, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "226", 学院: "法学院", 专业名称: "法学", 录取数: 57, 最高分: 583, 平均分: 574, 最低分: 569, 最低排位: 48522, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "227", 学院: "经济学院", 专业名称: "国际经济与贸易", 录取数: 30, 最高分: 567, 平均分: 558, 最低分: 556, 最低排位: 63314, 科类: "物理类", 校区: "主校区"},
        {专业组: "227", 学院: "经济学院", 专业名称: "金融工程", 录取数: 64, 最高分: 567, 平均分: 559, 最低分: 556, 最低排位: 63126, 科类: "物理类", 校区: "主校区"},
        {专业组: "227", 学院: "经济学院", 专业名称: "经济学", 录取数: 20, 最高分: 574, 平均分: 565, 最低分: 563, 最低排位: 55063, 科类: "物理类", 校区: "主校区"},
        {专业组: "227", 学院: "经济学院", 专业名称: "数字经济", 录取数: 125, 最高分: 574, 平均分: 560, 最低分: 557, 最低排位: 62033, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "228", 学院: "建筑与城市规划学院", 专业名称: "城乡规划", 录取数: 4, 最高分: 555, 平均分: 554, 最低分: 553, 最低排位: 66341, 科类: "物理类", 校区: "主校区"},
        {专业组: "228", 学院: "建筑与城市规划学院", 专业名称: "城乡规划（国土空间规划创新班）", 录取数: 30, 最高分: 563, 平均分: 556, 最低分: 553, 最低排位: 66239, 科类: "物理类", 校区: "主校区"},
        {专业组: "228", 学院: "建筑与城市规划学院", 专业名称: "风景园林", 录取数: 10, 最高分: 560, 平均分: 555, 最低分: 552, 最低排位: 67831, 科类: "物理类", 校区: "主校区"},
        {专业组: "228", 学院: "建筑与城市规划学院", 专业名称: "建筑学", 录取数: 38, 最高分: 571, 平均分: 555, 最低分: 552, 最低排位: 67428, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "231", 学院: "艺术与设计学院", 专业名称: "工业设计", 录取数: 89, 最高分: 589, 平均分: 572, 最低分: 569, 最低排位: 47845, 科类: "物理类", 校区: "主校区"},
        {专业组: "231", 学院: "艺术与设计学院", 专业名称: "数字媒体技术", 录取数: 91, 最高分: 601, 平均分: 580, 最低分: 574, 最低排位: 43122, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "232", 学院: "管理学院", 专业名称: "管理科学与工程类", 录取数: 127, 最高分: 592, 平均分: 567, 最低分: 560, 最低排位: 58509, 科类: "物理类", 校区: "主校区"},
        {专业组: "232", 学院: "管理学院", 专业名称: "土地资源管理", 录取数: 10, 最高分: 560, 平均分: 559, 最低分: 559, 最低排位: 59543, 科类: "物理类", 校区: "主校区"},
        {专业组: "232", 学院: "管理学院", 专业名称: "土地资源管理（创新班）", 录取数: 10, 最高分: 563, 平均分: 560, 最低分: 559, 最低排位: 59713, 科类: "物理类", 校区: "主校区"},
        {专业组: "232", 学院: "管理学院", 专业名称: "电子商务", 录取数: 30, 最高分: 569, 平均分: 558, 最低分: 556, 最低排位: 63379, 科类: "物理类", 校区: "主校区"},
        
        {专业组: "233", 学院: "管理学院", 专业名称: "工商管理类", 录取数: 32, 最高分: 580, 平均分: 560, 最低分: 557, 最低排位: 61738, 科类: "物理类", 校区: "主校区"},
        {专业组: "233", 学院: "管理学院", 专业名称: "会计学", 录取数: 27, 最高分: 577, 平均分: 566, 最低分: 560, 最低排位: 57848, 科类: "物理类", 校区: "主校区"},
        
        // ====== 历史类数据（主校区） ======
        {专业组: "200", 学院: "外国语学院", 专业名称: "日语", 录取数: 30, 最高分: 546, 平均分: 539, 最低分: 535, 最低排位: 20562, 科类: "历史类", 校区: "主校区"},
        {专业组: "201", 学院: "外国语学院", 专业名称: "外国语言文学类", 录取数: 220, 最高分: 556, 平均分: 538, 最低分: 533, 最低排位: 21187, 科类: "历史类", 校区: "主校区"},
        
        {专业组: "202", 学院: "管理学院", 专业名称: "土地资源管理", 录取数: 25, 最高分: 540, 平均分: 537, 最低分: 535, 最低排位: 20426, 科类: "历史类", 校区: "主校区"},
        {专业组: "202", 学院: "管理学院", 专业名称: "土地资源管理（创新班）", 录取数: 10, 最高分: 550, 平均分: 544, 最低分: 541, 最低排位: 18143, 科类: "历史类", 校区: "主校区"},
        
        {专业组: "203", 学院: "管理学院", 专业名称: "电子商务", 录取数: 45, 最高分: 548, 平均分: 539, 最低分: 536, 最低排位: 19971, 科类: "历史类", 校区: "主校区"},
        {专业组: "203", 学院: "管理学院", 专业名称: "工商管理类", 录取数: 252, 最高分: 546, 平均分: 539, 最低分: 534, 最低排位: 20729, 科类: "历史类", 校区: "主校区"},
        {专业组: "203", 学院: "管理学院", 专业名称: "会计学", 录取数: 117, 最高分: 576, 平均分: 547, 最低分: 543, 最低排位: 17176, 科类: "历史类", 校区: "主校区"},
        
        {专业组: "204", 学院: "法学院", 专业名称: "法学", 录取数: 114, 最高分: 575, 平均分: 554, 最低分: 549, 最低排位: 14843, 科类: "历史类", 校区: "主校区"},
        {专业组: "204", 学院: "法学院", 专业名称: "社会工作", 录取数: 10, 最高分: 549, 平均分: 549, 最低分: 549, 最低排位: 15037, 科类: "历史类", 校区: "主校区"},
        
        {专业组: "205", 学院: "经济学院", 专业名称: "国际经济与贸易", 录取数: 81, 最高分: 550, 平均分: 538, 最低分: 535, 最低排位: 20411, 科类: "历史类", 校区: "主校区"},
        {专业组: "205", 学院: "经济学院", 专业名称: "经济学", 录取数: 45, 最高分: 566, 平均分: 544, 最低分: 539, 最低排位: 18639, 科类: "历史类", 校区: "主校区"},
        
        // ====== 揭阳校区（历史类） ======
        {专业组: "251", 学院: "先进制造学院", 专业名称: "电子商务", 录取数: 123, 最高分: 533, 平均分: 527, 最低分: 522, 最低排位: 26551, 科类: "历史类", 校区: "揭阳校区"},
        
        // ====== 揭阳校区（物理类） ======
        {专业组: "252", 学院: "先进制造学院", 专业名称: "电气工程及其自动化", 录取数: 146, 最高分: 593, 平均分: 575, 最低分: 570, 最低排位: 47080, 科类: "物理类", 校区: "揭阳校区"},
        {专业组: "252", 学院: "先进制造学院", 专业名称: "化学工程与工艺", 录取数: 66, 最高分: 568, 平均分: 562, 最低分: 559, 最低排位: 58867, 科类: "物理类", 校区: "揭阳校区"},
        {专业组: "252", 学院: "先进制造学院", 专业名称: "机械电子工程", 录取数: 146, 最高分: 576, 平均分: 567, 最低分: 563, 最低排位: 54379, 科类: "物理类", 校区: "揭阳校区"},
        {专业组: "252", 学院: "先进制造学院", 专业名称: "计算机科学与技术", 录取数: 146, 最高分: 584, 平均分: 573, 最低分: 569, 最低排位: 48295, 科类: "物理类", 校区: "揭阳校区"},
        {专业组: "252", 学院: "先进制造学院", 专业名称: "人工智能", 录取数: 151, 最高分: 581, 平均分: 567, 最低分: 564, 最低排位: 54005, 科类: "物理类", 校区: "揭阳校区"},
        {专业组: "252", 学院: "先进制造学院", 专业名称: "土木工程", 录取数: 60, 最高分: 563, 平均分: 561, 最低分: 559, 最低排位: 58852, 科类: "物理类", 校区: "揭阳校区"},
        {专业组: "253", 学院: "先进制造学院", 专业名称: "电子商务", 录取数: 31, 最高分: 565, 平均分: 555, 最低分: 550, 最低排位: 70720, 科类: "物理类", 校区: "揭阳校区"}
    ];

    // 填充专业表格
    function populateMajorTable() {
        const tableBody = document.getElementById('majorTableBody');
        tableBody.innerHTML = '';
        
        const categoryFilter = document.getElementById('categorySelect').value;
        const campusFilter = document.getElementById('campusSelect').value;
        const searchKeyword = document.getElementById('searchInput').value.toLowerCase();
        
        let filteredData = majorData;
        
        // 科类筛选
        if (categoryFilter !== 'all') {
            filteredData = filteredData.filter(major => major.科类 === categoryFilter);
        }
        
        // 校区筛选
        if (campusFilter !== 'all') {
            filteredData = filteredData.filter(major => major.校区 === campusFilter);
        }
        
        // 关键词搜索
        if (searchKeyword) {
            filteredData = filteredData.filter(major => 
                (major.专业组 && major.专业组.toLowerCase().includes(searchKeyword)) ||
                (major.学院 && major.学院.toLowerCase().includes(searchKeyword)) ||
                (major.专业名称 && major.专业名称.toLowerCase().includes(searchKeyword)) ||
                (major.科类 && major.科类.toLowerCase().includes(searchKeyword)) ||
                (major.校区 && major.校区.toLowerCase().includes(searchKeyword))
            );
        }
        
        if (filteredData.length === 0) {
            tableBody.innerHTML = '<tr><td colspan="10" class="text-center text-muted py-4">没有找到匹配的专业数据</td></tr>';
            return;
        }
        
        filteredData.forEach(major => {
            const row = document.createElement('tr');
            
            // 校区标签样式
            const campusClass = major.校区 === '主校区' ? 'main-campus' : 'jieyang-campus';
            const campusTag = `<span class="campus-tag ${campusClass}">${major.校区}</span>`;
            
            row.innerHTML = `
                <td>${major.专业组}</td>
                <td>${major.学院}</td>
                <td><strong>${major.专业名称}</strong></td>
                <td>${major.科类}</td>
                <td>${campusTag}</td>
                <td>${major.录取数}</td>
                <td class="text-primary fw-bold">${major.最高分}</td>
                <td>${major.平均分}</td>
                <td class="text-success fw-bold">${major.最低分}</td>
                <td>${major.最低排位}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // 筛选事件监听
    document.getElementById('categorySelect').addEventListener('change', populateMajorTable);
    document.getElementById('campusSelect').addEventListener('change', populateMajorTable);
    document.getElementById('searchInput').addEventListener('input', populateMajorTable);
    document.querySelector('.input-group button').addEventListener('click', populateMajorTable);

    // 志愿分析功能
    const scoreInput = document.getElementById('scoreInput');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const analysisResult = document.getElementById('analysisResult');
    
     analyzeBtn.addEventListener('click', () => {
        const score = parseInt(scoreInput.value);
        const category = document.getElementById('科类Select').value;
        
        if (isNaN(score) || score < 0 || score > 750) {
            analysisResult.innerHTML = '<div class="alert alert-danger">请输入有效的分数（0-750）</div>';
            return;
        }
        
        // 筛选出分数大于等于用户分数的专业
        const eligibleMajors = majorData.filter(major => 
            major.科类 === category && major.最低分 <= score
        );
        
        if (eligibleMajors.length === 0) {
            analysisResult.innerHTML = `<div class="alert alert-warning">根据2024年${category}数据，您的分数可能无法达到我校最低录取线</div>`;
            return;
        }
        
        // 按最低分从高到低排序
        eligibleMajors.sort((a, b) => b.最低分 - a.最低分);
        
        let html = `<div class="alert alert-success mb-4">您的分数可以报考以下${eligibleMajors.length}个${category}专业：</div>`;
        html += '<div class="row g-4">';
        
        // 只显示前10个专业
        const displayMajors = eligibleMajors.slice(0, 10);
        
        displayMajors.forEach(major => {
            const gap = score - major.最低分;
            const confidence = gap >= 10 ? '高' : (gap >= 5 ? '中' : '低');
            const confidenceClass = gap >= 10 ? 'text-success' : (gap >= 5 ? 'text-warning' : 'text-danger');
            const campusClass = major.校区 === '主校区' ? 'main-campus' : 'jieyang-campus';
            
            html += `
                <div class="col-md-6">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex justify-content-between align-items-start mb-3">
                                <h5 class="card-title">${major.专业名称}</h5>
                                <span class="badge ${confidenceClass}">${confidence}可能性</span>
                            </div>
                            <div class="d-flex align-items-center mb-2">
                                <span class="campus-tag ${campusClass} me-2">${major.校区}</span>
                                <span>${major.学院}</span>
                            </div>
                            <div class="mb-2">
                                <span class="text-muted">2024最低分:</span> 
                                <span class="fw-bold">${major.最低分}</span>
                                <span class="text-muted ms-2">排位:</span> 
                                <span>${major.最低排位}</span>
                            </div>
                            <div class="mb-2">
                                <span class="text-muted">分数差距:</span> 
                                <span class="fw-bold ${confidenceClass}">${gap}分</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        html += `<div class="alert alert-info mt-4">
            <p><i class="fas fa-info-circle me-2"></i>注：以上分析仅供参考，实际录取情况可能因政策调整而变化</p>
            <p><i class="fas fa-table me-2"></i>如需查看完整列表，请在上方专业查询系统中筛选${category}专业</p>
        </div>`;
        
        analysisResult.innerHTML = html;
    });

   // 获取优势专业信息
    function getTopMajors() {
        return `我校国家级一流本科专业包括（部分）：<br>
                <ul>
                    <li><strong>自动化</strong> - 国家级特色专业，就业率常年保持在98%以上</li>
                    <li><strong>机械设计制造及其自动化</strong> - 广东省名牌专业，师资力量雄厚</li>
                    <li><strong>计算机科学与技术</strong> - 广东省重点专业，毕业生平均起薪高</li>
                    <li><strong>土木工程</strong> - 通过国家工程教育专业认证，培养工程师的摇篮</li>
                    <li><strong>化学工程与工艺</strong> - 广东省重点学科，科研实力突出</li>
                    <li><strong>信息工程</strong> - 面向新一代信息技术，就业前景广阔</li>
                </ul>
                <p>更多专业信息请访问<a href="#major" class="show-major-link">专业查询系统</a>。</p>`;
    }

    // 处理分数问题
    function handleScoreQuestion(question) {
        const lowerQ = question.toLowerCase();
        
        // 提取分数
        const scoreMatch = lowerQ.match(/(\d+)\s*分/);
        if (!scoreMatch) return "请提供您的具体分数，例如：我考了580分，能报什么专业？";
        
        const score = parseInt(scoreMatch[1]);
        if (isNaN(score) || score < 0 || score > 750) {
            return "请输入有效的分数（0-750）";
        }
        
        // 确定科类（默认物理类）
        let category = "物理类";
        if (lowerQ.includes("历史") || lowerQ.includes("文科")) {
            category = "历史类";
        }
        
        // 筛选符合条件的专业
        const eligibleMajors = majorData.filter(major => 
            major.科类 === category && major.最低分 <= score
        );
        
        if (eligibleMajors.length === 0) {
            return `根据2024年${category}数据，您的分数可能无法达到我校最低录取线，建议考虑其他院校。`;
        }
        
        // 按最低分从高到低排序（取前5个）
        eligibleMajors.sort((a, b) => b.最低分 - a.最低分);
        const topMajors = eligibleMajors.slice(0, 5);
        
        let html = `<div class="score-analysis">
            <div class="score-header">
                <i class="fas fa-chart-line"></i>
                <h4>${score}分专业匹配分析（${category}）</h4>
            </div>
            <p>根据2024年录取数据，您的分数可以报考以下专业：</p>
            <ul class="major-list">`;
        
        topMajors.forEach(major => {
            const gap = score - major.最低分;
            const confidence = gap >= 15 ? '高' : (gap >= 5 ? '中' : '低');
            const confidenceClass = gap >= 15 ? 'high-confidence' : (gap >= 5 ? 'medium-confidence' : 'low-confidence');
            
            html += `<li>
                <div class="major-info">
                    <span class="major-name">${major.专业名称}</span>
                    <span class="badge ${major.校区 === '主校区' ? 'main-campus' : 'jieyang-campus'}">${major.校区}</span>
                </div>
                <div class="major-details">
                    <span>最低分: <strong>${major.最低分}</strong></span>
                    <span>排位: ${major.最低排位}</span>
                    <span class="confidence ${confidenceClass}">录取可能性: ${confidence}</span>
                </div>
                <div class="major-college">${major.学院}</div>
            </li>`;
        });
        
        html += `</ul>
            <div class="analysis-footer">
                <p>共找到${eligibleMajors.length}个匹配专业，<a href="#major" class="show-major-link">查看全部专业</a></p>
                <div class="confidence-legend">
                    <span><span class="legend high-confidence"></span>高可能性</span>
                    <span><span class="legend medium-confidence"></span>中可能性</span>
                    <span><span class="legend low-confidence"></span>低可能性</span>
                </div>
            </div>
        </div>`;
        
        return html;
    }

    // AI咨询助手知识库
    const qa = {
        "分数线": "2024年各专业最低分数线可在专业查询表格中查看。2024年我校广东物理类最低录取分为548分（全省约4.5万位次），历史类最低录取分为522分（全省约2.65万位次）。揭阳校区分数略低",
        "宿舍": "我校宿舍为4-6人间，配备空调、独立卫生间，大学城校区热水供应到23:30。住宿费标准为1500-2000元/年",
        "转专业": "学生可在大一第二学期申请转专业，需满足以下条件：1. 第一学期GPA≥3.5；2. 无不及格课程；3. 通过接收学院组织的考核。热门专业（如计算机）竞争激烈",
        "招生计划": "2024年物理类广东省招生约5000人，历史类约800人。具体分专业计划可在专业查询系统查看",
        "专业排名": "我校工程学、计算机科学进入全球ESI前1%，自动化、机械工程为国家一流本科专业",
        "奖学金": "设有新生奖学金、国家奖学金、学业奖学金等，最高可达1万元/年。",
        "中外合作": "与英国、澳大利亚等多所大学有2+2合作项目。高考英语≥120分可优先申请",
        "校区": "大学城校区：广州市番禺区广州大学城外环西路100号<br>东风路校区：广州市越秀区东风东路729号<br>龙洞校区：广州市天河区龙洞街迎龙路161号<br>揭阳校区：揭阳市惠来县粤东新城学院路1号",
        "优势专业": getTopMajors(),
        "王牌专业": getTopMajors(),
        "推荐专业": getTopMajors(),
        "分数问题": handleScoreQuestion
    };

    // 优化后的处理用户提问逻辑
    function handleQuestion(question) {
        const lowerQ = question.toLowerCase();
        
        // 优先检查分数和专业推荐问题
        const scoreKeywords = ["分", "分数", "考了", "考多少", "能上", "能报", "多少分", "录取线"];
        const majorKeywords = ["什么专业好", "优势专业", "好专业", "王牌专业", "推荐专业", "强势专业"];
        
        if (scoreKeywords.some(keyword => lowerQ.includes(keyword))) {
            return qa.分数问题(question);
        }
        
        if (majorKeywords.some(keyword => lowerQ.includes(keyword))) {
            return qa.优势专业;
        }
        
        // 检查是否包含预设关键词
        for (const key in qa) {
            if (lowerQ.includes(key.toLowerCase())) {
                // 如果值是一个函数，调用它并返回结果
                if (typeof qa[key] === 'function') {
                    return qa[key](question);
                }
                return qa[key];
            }
        }
        
        // 检查是否包含专业名称或学院
        const matchedMajor = majorData.find(major => 
            (major.专业名称 && lowerQ.includes(major.专业名称.toLowerCase())) || 
            (major.学院 && lowerQ.includes(major.学院.toLowerCase()))
        );
        
        if (matchedMajor) {
            const campusBadge = matchedMajor.校区 === '主校区' ? 
                '<span class="badge main-campus me-1">主校区</span>' : 
                '<span class="badge jieyang-campus me-1">揭阳校区</span>';
                
            return `${campusBadge}<strong>${matchedMajor.专业名称}</strong>（${matchedMajor.学院}）2024年最低录取分数为<strong>${matchedMajor.最低分}</strong>分，对应全省排位${matchedMajor.最低排位}。`;
        }
        
        return "该问题暂未收录，您可以通过以下方式获得帮助：<br>" + 
               "<div class='help-options'>" +
               "<div><i class='fas fa-phone'></i> 招生热线：020-39322681</div>" +
               "<div><i class='fab fa-weixin'></i> 微信公众号：广东工业大学招生办</div>" +
               "<div><i class='fas fa-globe'></i> 官网：<a href='https://zsb.gdut.edu.cn' target='_blank'>zsb.gdut.edu.cn</a></div>" +
               "</div>";
    }

    // 优化后的AI咨询逻辑
    const chatbotContainer = document.getElementById('chatbotContainer');
    const chatWindow = document.getElementById('chatWindow');
    const chatForm = document.getElementById('chatForm');
    const userInput = document.getElementById('userInput');
    const typingIndicator = document.getElementById('typingIndicator');
    const btnCloseChat = document.getElementById('btnCloseChat');
    const chatbotClosed = document.getElementById('chatbotClosed');
    const unreadBadge = document.getElementById('unreadBadge');

    // 未读消息计数
    let unreadCount = 0;
    
    // 初始化聊天
    function initChat() {
        addMessage('ai', '<div class="welcome-message">' +
            '<div class="welcome-header">' +
            '<i class="fas fa-robot"></i>' +
            '<h4>广工招生咨询助手</h4>' +
            '</div>' +
            '<p>您好！我可以回答以下问题：</p>' +
            '<ul class="help-topics">' +
            '<li><i class="fas fa-check-circle"></i> 专业分数与录取线</li>' +
            '<li><i class="fas fa-check-circle"></i> 校园生活与宿舍条件</li>' +
            '<li><i class="fas fa-check-circle"></i> 专业排名与优势专业</li>' +
            '<li><i class="fas fa-check-circle"></i> 转专业政策</li>' +
            '<li><i class="fas fa-check-circle"></i> 奖学金及中外合作</li>' +
            '</ul>' +
            '<p>请随时向我提问！</p>' +
            '</div>');
    }
    
    // 最小化聊天窗口
    btnCloseChat.addEventListener('click', () => {
        chatbotContainer.style.display = 'none';
        chatbotClosed.style.display = 'block';
        
        // 如果有未读消息，更新徽章
        if(unreadCount > 0) {
            unreadBadge.textContent = unreadCount;
            unreadBadge.style.display = 'flex';
        } else {
            unreadBadge.style.display = 'none';
        }
    });
    
    // 点击最小化按钮恢复聊天
    chatbotClosed.addEventListener('click', () => {
        chatbotContainer.style.display = 'block';
        chatbotClosed.style.display = 'none';
        unreadCount = 0;
        unreadBadge.style.display = 'none';
    });
    
    // 添加消息
    function addMessage(role, content) {
        const div = document.createElement('div');
        div.className = `chat-message ${role === 'user' ? 'user-message' : 'ai-message'}`;
        div.innerHTML = content;
        chatWindow.appendChild(div);
        chatWindow.scrollTop = chatWindow.scrollHeight;
    }
    
    // 表单提交处理
    chatForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const msg = userInput.value.trim();
        if (!msg) return;
        
        addMessage('user', msg);
        userInput.value = '';
        
        // 显示"正在输入"状态
        typingIndicator.style.display = 'block';
        chatWindow.scrollTop = chatWindow.scrollHeight;
        
        setTimeout(() => {
            typingIndicator.style.display = 'none';
            
            // 如果窗口已最小化，增加未读计数
            if(chatbotClosed.style.display === 'block') {
                unreadCount++;
            }
            
            const response = handleQuestion(msg);
            addMessage('ai', response);
            
            // 添加示例问题提示
            if (chatWindow.querySelectorAll('.chat-message').length === 3) {
                setTimeout(() => {
                    addMessage('ai', '<div class="suggested-questions">' +
                        '<p>您可以尝试问我：</p>' +
                        '<ul>' +
                        '<li>我考了580分能报什么专业？</li>' +
                        '<li>广工有哪些优势专业？</li>' +
                        '<li>广工转专业政策是什么样的？</li>' +
                        '<li>输入具体专业名称即可查询分数</li>' +
                        '</ul>' +
                        '</div>');
                }, 500);
            }
        }, 1500);
    });

    // 页面加载时
    document.addEventListener('DOMContentLoaded', () => {
        populateMajorTable();
        initChat();
        
        // 添加点击事件处理（用于专业查询链接）
        chatWindow.addEventListener('click', function(e) {
            if (e.target && e.target.classList.contains('show-major-link')) {
                document.querySelector('#major').scrollIntoView({ behavior: 'smooth' });
                e.preventDefault();
            }
        });
    });
</script>

<style>
    /* AI助手样式优化 */
    .welcome-message {
        background: linear-gradient(135deg, #f0f7ff, #e6f0ff);
        border-radius: 15px;
        padding: 15px;
        border-left: 4px solid var(--primary-color);
    }
    
    .welcome-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .welcome-header i {
        font-size: 1.8rem;
        color: var(--primary-color);
        margin-right: 10px;
    }
    
    .welcome-header h4 {
        margin: 0;
        color: var(--primary-color);
    }
    
    .help-topics {
        padding-left: 20px;
        margin: 15px 0;
    }
    
    .help-topics li {
        margin-bottom: 8px;
        display: flex;
        align-items: center;
    }
    
    .help-topics i {
        color: var(--success-color);
        margin-right: 8px;
        font-size: 0.9rem;
    }
    
    .score-analysis {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 15px;
        border: 1px solid #e9ecef;
    }
    
    .score-header {
        display: flex;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .score-header i {
        font-size: 1.5rem;
        color: var(--primary-color);
        margin-right: 10px;
    }
    
    .score-header h4 {
        margin: 0;
        color: var(--dark-color);
    }
    
    .major-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .major-list li {
        background: white;
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        border-left: 3px solid var(--primary-color);
    }
    
    .major-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
    }
    
    .major-name {
        font-weight: 600;
        color: var(--dark-color);
    }
    
    .major-details {
        display: flex;
        justify-content: space-between;
        font-size: 0.9rem;
        color: #666;
        margin-bottom: 5px;
    }
    
    .major-college {
        font-size: 0.85rem;
        color: #777;
        font-style: italic;
    }
    
    .confidence {
        padding: 2px 8px;
        border-radius: 10px;
        font-size: 0.8rem;
    }
    
    .high-confidence {
        background-color: #d1e7dd;
        color: #0f5132;
    }
    
    .medium-confidence {
        background-color: #fff3cd;
        color: #664d03;
    }
    
    .low-confidence {
        background-color: #f8d7da;
        color: #842029;
    }
    
    .analysis-footer {
        margin-top: 15px;
        padding-top: 10px;
        border-top: 1px dashed #ddd;
        font-size: 0.9rem;
    }
    
    .confidence-legend {
        display: flex;
        gap: 15px;
        margin-top: 10px;
        font-size: 0.8rem;
    }
    
    .confidence-legend span {
        display: flex;
        align-items: center;
    }
    
    .confidence-legend .legend {
        display: inline-block;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 5px;
    }
    
    .confidence-legend .high-confidence {
        background-color: #d1e7dd;
    }
    
    .confidence-legend .medium-confidence {
        background-color: #fff3cd;
    }
    
    .confidence-legend .low-confidence {
        background-color: #f8d7da;
    }
    
    .suggested-questions {
        background-color: #e9f7fe;
        border-radius: 10px;
        padding: 12px 15px;
        font-size: 0.9rem;
        margin-top: 10px;
    }
    
    .suggested-questions p {
        font-weight: 500;
        margin-bottom: 8px;
    }
    
    .suggested-questions ul {
        padding-left: 20px;
        margin: 0;
    }
    
    .suggested-questions li {
        margin-bottom: 5px;
        color: #0066cc;
    }
    
    .help-options {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 15px;
    }
    
    .help-options div {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
    }
    
    .help-options i {
        width: 25px;
        color: var(--primary-color);
    }
    
    .show-major-link {
        color: var(--primary-color);
        font-weight: 500;
        text-decoration: none;
    }
    
    .show-major-link:hover {
        text-decoration: underline;
    }
</style>
</script>
</body>
</html>